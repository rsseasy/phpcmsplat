jQuery.bind=function(n,t){var i=Array.prototype.slice.call(arguments,2);return function(){var r=[this].concat(i,$.makeArray(arguments));return t.apply(n,r)}},function(n){var t=navigator.userAgent.toLocaleLowerCase();popuplayer={getOptions:function(){return{name:"SLB",zIndex:32e3,color:"white",dir:"/img/sexy",imagesdir:"/img/sexy",emergefrom:"top",background:"bgSexy.png",backgroundIE:"bgSexy.gif",buttons:"buttons.png",displayed:0,showDuration:200,closeDuration:400,moveDuration:500,moveEffect:"easeInOutBack",resizeDuration:500,resizeEffect:"easeInOutBack",shake:{distance:10,duration:100,transition:"easeInOutBack",loops:2},BoxStyles:{width:300,height:100},Skin:{white:{hexcolor:"#FFFFFF",captionColor:"#000000","background-color":"#000000",opacity:.6},black:{hexcolor:"#000000",captionColor:"#FFFFFF","background-color":"#000000",opacity:.6},blanco:{hexcolor:"#FFFFFF",captionColor:"#000000","background-color":"#000000",opacity:.6},negro:{hexcolor:"#000000",captionColor:"#FFFFFF","background-color":"#000000",opacity:.6}}}},overlay:{create:function(t){this.options=t;this.element=n('<div id="'+(new Date).getTime()+'"><\/div>');this.element.css(n.extend({},{position:"absolute",top:0,left:0,opacity:0,display:"none","border-radius":"10px","z-index":this.options.zIndex},this.options.style));this.element.bind("click",n.bind(this,function(n,t){this.options.hideOnClick&&(this.options.callback?this.options.callback():this.hide());t.preventDefault()}));this.hidden=!0;this.inject()},inject:function(){var i,r;this.target=n(document.body);this.target.append(this.element);/msie\s6/.test(t)&&(i=parseInt(this.element.css("zIndex")),i||(i=1,r=this.element.css("position"),r!="static"&&r||this.element.css({position:"relative"}),this.element.css({zIndex:i})),i=!!(this.options.zIndex||this.options.zIndex===0)&&i>this.options.zIndex?this.options.zIndex:i-1,i<0&&(i=1),this.shim=n('<iframe id="IF_'+(new Date).getTime()+'" scrolling="no" frameborder=0 src=""><\/div>'),this.shim.css({zIndex:i,position:"absolute",top:0,left:0,border:"none",opacity:0}),this.shim.insertAfter(this.element))},resize:function(i,r){this.element.css({height:0,width:0});this.shim&&this.shim.css({height:0,width:0});var u={x:n(document).width(),y:n(document).height()},f=/safari/.test(t)?u.x-25<document.body.clientWidth?document.body.clientWidth:u.x:u.x;return this.element.css({width:i?i:f,height:r?r:u.y}),this.shim&&(this.shim.css({height:0,width:0}),this.shim.css({width:i?i:f,height:r?r:u.y})),this},show:function(){return this.hidden?(this.transition&&this.transition.stop(),this.target.bind("resize",n.bind(this,this.resize)),this.resize(),this.shim&&this.shim.css({display:"block"}),this.hidden=!1,this.transition=this.element.fadeIn(this.options.showDuration,n.bind(this,function(){this.element.trigger("show")})),this):this},hide:function(){return this.hidden?this:(this.transition&&this.transition.stop(),this.target.unbind("resize"),this.shim&&this.shim.css({display:"none"}),this.hidden=!0,this.transition=this.element.fadeOut(this.options.closeDuration,n.bind(this,function(){this.element.trigger("hide");this.element.css({height:0,width:0})})),this)}},backwardcompatibility:function(t){this.options.dir=t.imagesdir||t.path||t.folder||t.dir;this.options.OverlayStyles=n.extend(this.options.Skin[this.options.color],this.options.OverlayStyles||{})},preloadimage:function(n){img=new Image;img.src=n},initialize:function(t){var u=this,r,i;this.options=n.extend(this.getOptions(),t);this.backwardcompatibility(this.options);r=this.options.dir+"/"+this.options.color+"/"+(window.XMLHttpRequest==undefined&&ActiveXObject!=undefined?this.options.backgroundIE:this.options.background);i=this.options.name;this.preloadimage(r);this.preloadimage(this.options.dir+"/"+this.options.color+"/"+this.options.buttons);this.overlay.create({style:this.options.Skin[this.options.color],hideOnClick:!0,zIndex:this.options.zIndex-1,callback:n.bind(this,this.close),showDuration:this.options.showDuration,showEffect:this.options.showEffect,closeDuration:this.options.closeDuration,closeEffect:this.options.closeEffect});this.popup={};n("body").append('<div id="'+i+'-Wrapper"><div id="'+i+'-Background"><\/div><div id="'+i+'-Contenedor"><p id="'+i+'-Descripcion"><\/p><div id="'+i+'-Top" style="background-image: url('+r+')"><h2 id="'+i+'-Title"><\/h2><span id="'+i+'-CloseButton" title="关闭窗口">&nbsp;<\/span><div id="'+i+'-TopLeft" style="background-image: url('+r+')"><\/div><\/div><div id="'+i+'-Contenido"><\/div><div id="'+i+'-Bottom" style="background-image: url('+r+')"><div id="'+i+'-BottomRight" style="background-image: url('+r+')"><\/div><\/div><div id="'+i+'-Navegador"><a id="'+this.options.name+'-Right">&nbsp;<\/a><a id="'+this.options.name+'-Left">&nbsp;<\/a><\/div><\/div><\/div>');this.Wrapper=n("#"+i+"-Wrapper");this.Background=n("#"+i+"-Background");this.Contenedor=n("#"+i+"-Contenedor");this.Top=n("#"+i+"-Top");this.Title=n("#"+i+"-Title");this.Descripcion=n("#"+i+"-Descripcion");this.CloseButton=n("#"+i+"-CloseButton");this.Contenido=n("#"+i+"-Contenido");this.Nav=n("#"+i+"-Navegador");this.NavRight=n("#"+i+"-Right");this.NavLeft=n("#"+i+"-Left");this.Wrapper.css({"z-index":this.options.zIndex,display:"none"}).hide();this.Background.css({"z-index":this.options.zIndex+1});this.Contenedor.css({position:"absolute",width:this.options.BoxStyles.width,"z-index":this.options.zIndex+2});this.Contenido.css({height:this.options.BoxStyles.height,"border-left-color":this.options.Skin[this.options.color].hexcolor,"border-right-color":this.options.Skin[this.options.color].hexcolor});this.CloseButton.css({"background-image":"url("+this.options.dir+"/"+this.options.color+"/"+this.options.buttons+")"});this.NavLeft.css({"background-image":"url("+this.options.dir+"/"+this.options.color+"/"+this.options.buttons+")"});this.NavRight.css({"background-image":"url("+this.options.dir+"/"+this.options.color+"/"+this.options.buttons+")"});this.Nav.css({color:this.options.Skin[this.options.color].captionColor});this.Descripcion.css({color:this.options.Skin[this.options.color].captionColor});this.CloseButton.bind("click",n.bind(this,function(){return this.close(),!1}));this.NavLeft.bind("click",n.bind(this,function(){return this.prev&&this.prev.click(),!1}));this.NavRight.bind("click",n.bind(this,function(){return this.next&&this.next.click(),!1}));n(document).bind("keydown",n.bind(this,function(n,t){this.options.displayed==1&&(t.keyCode==27&&this.close(),t.keyCode==37&&this.prev.click(),t.keyCode==39&&this.next.click())}));n(window).bind("resize",n.bind(this,function(){this.options.displayed==1&&(this.replaceBox(),this.overlay.resize())}));n(window).bind("scroll",n.bind(this,function(){this.options.displayed==1&&this.replaceBox()}));this.refresh()},hook:function(t){t=n(t);t.blur();this.show(t.attr("title")||t.attr("name")||t.attr("alt")||"",t.attr("href")||t.attr("src"),t,null,t.attr("desc"))},close:function(){this.onclose&&this.onclose();this.animate(0)},onclose:function(){},group:{},refresh:function(){var t=this;t.group={};n("[popup]").each(function(){var r=n(this),i;r.click(function(n){n.preventDefault();t.hook(this)});i=r.attr("popup");i!="popup"&&(t.group[i]=t.group[i]===undefined?0:++t.group[i],r.attr(i+"idx",t.group[i]))})},animate:function(t){this.options.displayed==0&&t!=0||t==1?(this.overlay.show(),this.options.displayed=1,this.Wrapper.css({display:"block"})):(this.Wrapper.css({display:"none",top:-(this.options.BoxStyles.height+280)}).hide(),this.overlay.hide(),this.overlay.element.bind("hide",n.bind(this,function(){this.options.displayed&&(this.Image&&this.Image.remove(),this.options.displayed=0)})))},replaceBox:function(t){var r={x:n(window).width(),y:n(window).height()},i={x:n(window).scrollLeft(),y:n(window).scrollTop()},e=this.options.BoxStyles.width,o=this.options.BoxStyles.height,u,f;this.options.displayed==0&&(u=0,f=0,f=i.x+(r.x-e)/2,u=this.options.emergefrom=="bottom"?i.y+r.y+80:i.y-o-80,this.Wrapper.css({display:"none",top:u,left:f}),this.Contenedor.css({width:e}),this.Contenido.css({height:o-70}));t=n.extend({},{width:this.popup.width,height:this.popup.height,resize:0},t);this.MoveBox&&this.MoveBox.stop();this.MoveBox=this.Wrapper.animate({left:i.x+(r.x-t.width)/2,top:i.y+(r.y-(t.height+48))/2},{duration:this.options.moveDuration,easing:this.options.moveEffect});t.resize&&(this.ResizeBox2&&this.ResizeBox2.stop(),this.ResizeBox2=this.Contenido.animate({height:t.height},{duration:this.options.resizeDuration,easing:this.options.resizeEffect}),this.ResizeBox&&this.ResizeBox.stop(),this.ResizeBox=this.Contenedor.animate({width:t.width},{duration:this.options.resizeDuration,easing:this.options.resizeEffect,complete:function(){n(this).trigger("complete")}}))},removeclose:function(){this.CloseButton.hide()},display:function(n,t,i){return this.show(t,n,"",i)},show:function(i,r,u,f,e){var o,l,s,h;this.showLoading();var a=r.match(/(.+)?/)[1]||r,c=r.match(/\?(.+)/);c&&(c=c[1]);o=f?f:this.parseQuery(c);this.ResizeBox&&this.ResizeBox.unbind("complete");o=n.extend({},{width:0,height:0,modal:0,background:"",title:o.title||i},o||{});o.width=parseInt(o.width);o.height=parseInt(o.height);o.modal=parseInt(o.modal);this.overlay.options.hideOnClick=!o.modal;this.popup=n.extend({},o,{width:o.width+14});a.match(/\.(jpe?g|png|gif|bmp)$/gi)?(this.img=new Image,this.img.onload=n.bind(this,function(){if(this.img.onload=function(){},!o.width){var t=this.calculate(this.img.width,this.img.height);o.width=t.x;o.height=t.y;this.popup.width=o.width+14}this.popup.height=o.height-25;this.replaceBox({resize:1});this.ResizeBox.bind("complete",n.bind(this,function(){this.showImage(this.img.src,o)}))}),this.img.onerror=n.bind(this,function(){this.show("",this.options.imagesdir+"/"+this.options.color+"/404.png")}),this.img.src=r):(o.width||(this.popup.width=450),o.height||(o.height=250),this.popup.height=o.height+(/opera/.test(t)?2:0),this.replaceBox({resize:1}),u=="html"?(u=null,this.ResizeBox.bind("complete",n.bind(this,function(){this.showContent(r,this.popup)}))):r.indexOf("TB_html")!=-1?this.ResizeBox.bind("complete",n.bind(this,function(){this.showContent(this.popup.html,this.popup)})):r.indexOf("TB_inline")!=-1?this.ResizeBox.bind("complete",n.bind(this,function(){this.showContent(n("#"+o.inlineId).html(),this.popup)})):r.indexOf("TB_iframe")!=-1?(l=r.split("TB_"),this.ResizeBox.bind("complete",n.bind(this,function(){this.showIframe(l[0].replace(/[\?#&]$/,""),this.popup)}))):this.ResizeBox.bind("complete",n.bind(this,function(){n.ajax({url:r,type:"GET",cache:!1,error:n.bind(this,function(){this.show("",this.options.imagesdir+"/"+this.options.color+"/404html.png")}),success:n.bind(this,this.handlerFunc)})})));this.Nav.hide();u&&u!="html"&&u.attr&&(s=u.attr("popup"),this.group[s]&&(h=parseInt(u.attr(s+"idx")),this.Nav.show(),this.next=n("["+s+"idx="+(h==this.group[s]?0:h+1)+"]"),this.prev=n("["+s+"idx="+(h?h-1:this.group[s])+"]")));this.showTitle(o.title);this.showDescripcion(e);this.animate(1)},calculate:function(t,i){var r=n(window).width()-100,u=n(window).height()-100;return t>r?(i=i*(r/t),t=r,i>u&&(t=t*(u/i),i=u)):i>u&&(t=t*(u/i),i=u,t>r&&(i=i*(r/t),t=r)),{x:parseInt(t),y:parseInt(i)}},handlerFunc:function(n,t){this.showContent(t,this.popup)},showTitle:function(n){this.Title.hide();n&&(this.Title.show(),this.Title.html(n))},showDescripcion:function(n){this.Descripcion.hide();n&&(this.Descripcion.show(),this.Descripcion.html(n))},showImage:function(t,i){this.Background.empty().removeAttr("style").css({width:"auto",height:"auto"}).append('<img id="'+this.options.name+'-Image"/>');this.Image=n("#"+this.options.name+"-Image");this.Image.attr("src",t).css({width:i.width,height:i.height});this.Contenedor.css({background:"none"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"})},showContent:function(t,i){this.Background.empty().css({width:i.width-14,height:i.height+30,"background-color":i.background||"#ffffff"});this.Contenido.empty().css({width:i.width-14,"background-color":i.background||"#ffffff"}).append('<div id="'+this.options.name+'-Image"/>');this.Image=n("#"+this.options.name+"-Image");this.Image.css({width:i.width-14,height:i.height,overflow:"auto",background:i.height||"#ffffff"}).append(t);this.Contenedor.css({background:"none"})},showHtml:function(n,t){t=t||{width:400,height:250};this.show(t.title||"信息提示",n||"","html",t)},alert:function(n){this.showHtml(n,{width:400,height:100})},javaScript:function(n,t,i){this.show("信息提示",t+'<script type="text/javascript">'+n+"<\/script>"||"","html",i||{width:400,height:250})},showError:function(n,t){this.show("信息提示",'<div style="text-center:center;"><span class="red">'+n+"<\/span><\/div>"||"","html",t||{width:200,height:100})},showIframe:function(t,i){this.Background.empty().css({width:i.width-14,height:i.height+30,"background-color":i.background||"#ffffff"});var r="if_"+(new Date).getTime()+"-Image";this.Contenido.empty().css({width:i.width-14,"background-color":i.background||"#ffffff",padding:"0px"}).append('<iframe id="'+r+'" frameborder="0"><\/iframe>');this.Image=n("#"+r);this.Image.css({width:i.width-14,height:i.height,background:i.background||"#ffffff"}).attr("src",t);this.Contenedor.css({background:"none"})},showLoading:function(){this.Background.empty().removeAttr("style").css({width:"auto",height:"auto"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"});this.Contenedor.css({background:"url("+this.options.imagesdir+"/"+this.options.color+"/loading.gif) no-repeat 50% 50%"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"});this.replaceBox(n.extend(this.options.BoxStyles,{resize:1}))},parseQuery:function(n){var r,u,i,t;if(!n)return{};for(r={},u=n.split(/[;&]/),i=0;i<u.length;i++)(t=u[i].split("="),t&&t.length==2)&&(r[unescape(t[0])]=unescape(t[1]).replace(/\+/g," "));return r},shake:function(){var t=this.options.shake.distance,n=this.Wrapper.position();for(n=n.left,x=0;x<this.options.shake.loops;x++)this.Wrapper.animate({left:n+t},this.options.shake.duration,this.options.shake.transition).animate({left:n-t},this.options.shake.duration,this.options.shake.transition);this.Wrapper.animate({left:n+t},this.options.shake.duration,this.options.shake.transition).animate({left:n},this.options.shake.duration,this.options.shake.transition)}}}(jQuery)